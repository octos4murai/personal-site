<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>First-class Functions | Al Idian</title>

    <meta name="description" content="A personal site about software development">

    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Merriweather&amp;display=swap">

    <link rel="stylesheet" href="/css/syntax-highlight.css">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
</head>
<body>
    <header>
        <h3 id="site-title" class="no-margin no-padding"><a href="/">Al Idian</a></h3>
    </header>

    <main>
        
<h1 id="post-title">First-class Functions</h1>
<p id="post-date" class="gray-text">2017.05.12</p>

<h3>What is it?</h3>
<p>Having first-class functions is a feature that is characteristic of functional programming — a programming paradigm “that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data” (<a href="https://en.wikipedia.org/wiki/Functional_programming">Functional Programming</a>). Programming languages that treat functions as first-class support the following:</p>
<ol>
<li>Assigning functions to variables,</li>
<li>Passing functions as arguments, and</li>
<li>Returning functions as the output of other functions.</li>
</ol>
<p>Here is some JavaScript<sup>1</sup> code to illustrate:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token parameter">year<span class="token punctuation">,</span> functionArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">functionArg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">        <span class="token keyword">return</span> obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span></mark><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active"><span class="token keyword">var</span> <span class="token function-variable function">innerFunctionAlias</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'In inner function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> innerFunctionAlias<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark></code></pre>
<p>This snippet shows how JavaScript supports each of the previously-mentioned features of first-class functions. Let me go through them one by one within the context of the code above.</p>
<h3>Assigning functions to variables</h3>
<p>The second highlighted line shows how first-class functions can be assigned to variables (just like numbers, booleans, and other primitives). In JavaScript, no reserved keywords need be used. Instead, the JavaScript engine attempts to independently determine the type of the value being assigned.</p>
<p>To call the assigned function, one can use the variable name with the requisite parentheses to invoke the function. For example, the function <em>innerFunction</em> can be called with <em>innerFunctionAlias()</em>.</p>
<h3>Passing functions as arguments</h3>
<p>The last highlighted line shows how first-class functions can be passed as arguments of other functions. In the example provided, <em>innerFunctionAlias</em> (a variable that points to a function) is passed as an argument for <em>outerFunction</em>, along with the number variable <em>year</em>.</p>
<p><em>outerFunction</em> invokes whatever function is passed to it by using the argument variable <em>functionArg</em>. The function to which <em>innerFunctionAlias</em> is pointing is therefore invoked.</p>
<h3>Returning functions as output</h3>
<p>The first highlighted line shows how first-class functions can be returned from other functions. In the example provided, an anonymous function<sup>2</sup> is returned that itself returns one of two values.</p>
<p>It is very important to note that what is being returned from <em>outerFunction</em> is not the output of said anonymous function. Instead, what is returned is the function itself! Because of this, we can observe in the final line of the snippet that a trailing set of parentheses is used to invoke the function returned: <em>outerFunction(2017, innerFunctionAlias)<span class="green-text">()</span></em>.</p>
<h3>A realistic example</h3>
<p>These features of first-class functions can be combined to make some very elegant and intuitive implementations. One popular usage is implementing the <em>map</em> functionality. By convention, a <em>map</em> function takes a function and a collection of values and “applies” the function on every element of the collection.</p>
<p>In non-functional programming, options in applying functions to objects in a collection are limited. The most common way is to use a loop like so:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> squaredNumbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> doubledNumbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Squaring numbers</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> num <span class="token keyword">in</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    squaredNumbers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>num <span class="token operator">*</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br>Console<span class="token punctuation">.</span><span class="token function">Writeline</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">,</span> squaredNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Doubling numbers</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> num <span class="token keyword">in</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    doubledNumbers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br>Console<span class="token punctuation">.</span><span class="token function">Writeline</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">,</span> doubledNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>With first-class functions, we can instead do the following:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Squaring numbers</span><br><span class="token keyword">var</span> squaredNumbers <span class="token operator">=</span> <span class="token function">simpleMap</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> num <span class="token operator">*</span> num<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>squaredNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Doubling numbers</span><br><span class="token keyword">var</span> doubledNumbers <span class="token operator">=</span> <span class="token function">simpleMap</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doubledNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Map function</span><br><span class="token keyword">function</span> <span class="token function">simpleMap</span><span class="token punctuation">(</span><span class="token parameter">objArray<span class="token punctuation">,</span> functionArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> objArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        result <span class="token operator">+=</span> <span class="token function">functionArg</span><span class="token punctuation">(</span>objArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> result<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>With a map function available (i.e. <em>simpleMap()</em>), we are able to abstract away some functionality such that any function can be passed to our map function (along with a compatible collection of objects) and the function will be applied to every object in the collection.</p>
<h3>TL/DR</h3>
<p>The concept of first-class functions constitutes a paradigm shift for programmers who have only ever worked with non-functional languages. Learning both and pondering their differences can be a worthwhile and enjoyable experience.</p>
<p class="center-text section-divider">
    -----
</p>
<h3>Notes</h3>
<ul>
<li><sup>1</sup> JavaScript was named after the very popular Java to attract more developers to learn and use the language. For the same reason, JavaScript syntax resembles Java syntax – making it more palatable to Java developers. Under the hood however, JavaScript has more in common with languages like Scheme and Haskell (e.g. JavaScript treats functions as first-class entities, while Java does not).</li>
<li><sup>2</sup> Anonymous functions are created at runtime and are typically for single-use.</li>
</ul>

    </main>

    <footer>
        <p class="center-text no-margin no-padding"><a href="https://github.com/octos4murai/personal-site/blob/master/LICENSE">MIT License</a></p>
        <p class="center-text no-margin no-padding"><a href="https://github.com/octos4murai/personal-site">/octos4murai</a></p>
    </footer>
</body>
</html>