<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Vim Tips: The Dot Operator | Al Idian</title>

    <meta name="description" content="A personal site about software development">

    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Merriweather&amp;display=swap">

    <link rel="stylesheet" href="/css/syntax-highlight.css">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
</head>
<body>
    <header>
        <h3 id="site-title" class="no-margin no-padding"><a href="/">Al Idian</a></h3>
    </header>

    <main>
        
<h1 id="post-title">Vim Tips: The Dot Operator</h1>
<p id="post-date" class="gray-text">2021.01.13</p>

<p>Conventional editors have conditioned us to think about the act of editing text in certain ways:</p>
<ul>
<li>Files are opened, modified, and eventually saved to preserve progress.</li>
<li>The mouse is heavily-used to navigate across the text.</li>
<li>Some sort of panel containing a file structure can be found usually on the side. A mouse-click takes you to another file.</li>
<li>Making repetitive modifications to text usually involves a lot of copy-paste — and often a lot of patience.</li>
</ul>
<p>While each of the items above make sense within the patterns provided by conventional editors, they don’t quite fit with the way Vim was designed to be used. In fact, each of these conventions are challenged by Vim. And while one can certainly use Vim while sticking to these conventions, much of Vim’s efficiency and convenience is unlocked only by progressively rethinking these conventions.</p>
<p>One of the tools Vim provides is the dot operator and is invoked by typing <code>.</code> while in normal mode. Put simply, the dot operator repeats the last action performed. While it is certainly worth digging into what exactly makes up an action, I won’t do so here. Instead, I prefer to show a couple of examples.</p>
<p>Suppose we have the following list of ids and we want to ensure each line ends in a comma, except for the final one. I often encounter this type of task in the real world where I am given a list of ids to investigate, and I need to plug the ids into an SQL query’s <code>WHERE-IN</code> clause:</p>
<pre class="language-text"><code class="language-text">13454373<br>46543422<br>65444439<br>23432232<br>89007851</code></pre>
<p>Outside of Vim, the user may need to make use of a feature like multi-row edit to get something like this done. More often though, inexperienced users will manually traverse each line to make the change. In Vim, we need only do the work on the first line. While the cursor is anywhere on the first line, typing <code>A,&lt;ESC&gt;</code> will do the job. Then move down to each subsequent line (anywhere within the line is fine) and invoke the dot operator to repeat the change.</p>
<p>Using the dot operator takes a little bit of planning. Specifically, we need to make sure the action we make is <em>repeatable</em>. In the previous example, notice that we used <code>A</code> instead of <code>i</code> or <code>a</code>. Doing so ensures that wherever we land on a line, the dot operator will always append the comma on the very end of that line.</p>
<p>In this next example, we see a poorly-indented JavaScript snippet. We want to indent each highlighted line as needed to improve readability:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token keyword">let</span> x <span class="token operator">=</span> y <span class="token operator">*</span> y<span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></mark><br><mark class="highlight-line highlight-line-active"><span class="token punctuation">}</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span></code></pre>
<p>Knowing that we have the dot operator in our back pocket, we can go anywhere in the first highlighted line and press <code>&gt;&gt;</code> to indent. Then we simply traverse to each other highlighted line and invoke the dot operator one or more times to get the indentation we want.</p>
<p>In <a href="https://www.goodreads.com/book/show/13607232-practical-vim">Practical Vim</a>, Drew Neil describes Vim’s dot operator as a miniature macro, or a “micro”. I think this is a clever way to think about the dot operator.</p>
<p>Other than the dot operator itself, the key thing I want to illustrate is how Vim encourages users to buy into its abstractions and conventions. Since these conventions are very different from other editors, it is normal for newbies to feel some hesitancy about this. But by making the leap, we take a giant step towards increased efficiency and productivity in Vim.</p>

    </main>

    <footer>
        <p class="center-text no-margin no-padding"><a href="https://github.com/octos4murai/personal-site/blob/master/LICENSE">MIT License</a></p>
        <p class="center-text no-margin no-padding"><a href="https://github.com/octos4murai/personal-site">/octos4murai</a></p>
    </footer>
</body>
</html>
